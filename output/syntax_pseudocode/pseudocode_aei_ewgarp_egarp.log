r; t=0.01 8:45:27

. 
. use http://www.stata-press.com/data/r16/food.dta, clear
r; t=1.87 8:45:28

. 
. mkmat p1 p2 p3 p4, matrix(P)
r; t=0.14 8:45:29

. 
. forvalues i = 1(1)4 {
  2.         
.         gen x`i' = w`i'* expfd/p`i'
  3. 
. }
r; t=0.00 8:45:29

. 
. mkmat x1 x2 x3 x4, matrix(X)
r; t=1.48 8:45:30

. 
. aei, price(P) quantity(X) tolerance(6)

    Number of obs           =       4048 
    Number of goods         =          4 
    Tolerance level         =    1.0e-06 

-------------------------
       Axiom |       AEI 
-------------+-----------
       eGARP |   .459821 
-------------------------
r; t=43248.81 20:46:20

. 
. *aei, price(P) quantity(X) axiom(eWGARP) tolerance(6)
. 
